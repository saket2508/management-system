(this["webpackJsonpmanagement-system"]=this["webpackJsonpmanagement-system"]||[]).push([[0],{72:function(e,t,n){},73:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(1),s=n.n(r),c=n(18),l=n.n(c),i=(n(72),n.p,n(73),n(22)),o=n(8),u=n(116),d=n(120),b=n(119),j=n(16),m=n.n(j),x=n(49),h=n(25),p=n(39);n(80),n(91);p.a.initializeApp({apiKey:"AIzaSyAGdC7GoipEX1hvavfc9rGh7v0pZZ68oHc",authDomain:"management-system-3f3cd.firebaseapp.com",projectId:"management-system-3f3cd",storageBucket:"management-system-3f3cd.appspot.com",messagingSenderId:"691896148959",appId:"1:691896148959:web:254604aaca23bdfafb5a6a"});var f=p.a.auth(),O=p.a.firestore(),g=(p.a.firestore.FieldValue.serverTimestamp,function(){var e=Object(h.a)(m.a.mark((function e(t,n){var a,r,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=O.doc("users/".concat(t.uid)),e.next=5,a.get();case 5:if(e.sent.exists){e.next=16;break}return r=t.email,s=t.displayName,c=t.photoURL,e.prev=8,e.next=11,a.set(Object(x.a)({displayName:s,email:r,photoURL:c},n));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",v(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,n){return e.apply(this,arguments)}}()),v=function(){var e=Object(h.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,O.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(x.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),w=Object(u.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),y=function(){var e=w(),t=Object(r.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],l=Object(r.useState)(""),u=Object(o.a)(l,2),j=u[0],m=u[1],x=Object(r.useState)(!1),h=Object(o.a)(x,2),p=h[0],O=h[1],g=Object(r.useState)(null),v=Object(o.a)(g,2),y=v[0],N=v[1],C=Object(r.useState)(null),S=Object(o.a)(C,2),k=S[0],E=S[1],R=function(e,t,n){e.preventDefault(),O(!0),f.signInWithEmailAndPassword(t,n).catch((function(e){O(!1),""===t||""===n?(E("Enter all fields correctly"),console.error("Error signing in with password and email",e)):(k&&E(null),N("Incorrect email or password"),console.error("Error signing in with password and email",e))}))},P=function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n?c(a):"userPassword"===n&&m(a)};return Object(a.jsx)("div",{className:"min-h-screen flex justify-center bg-gray-100 px-4 sm:px-6 lg:px-8 font-sans",children:Object(a.jsx)("div",{className:"max-w-lg w-full space-y-8",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{class:"mx-auto mt-6 mb-1 h-12 w-auto",src:"https://upload.wikimedia.org/wikipedia/en/f/ff/Manipal_University_logo.png",alt:"Workflow"}),Object(a.jsx)("h1",{className:"text-xl text-center",children:"Sign in to your account"}),Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(d.a,{open:null!=y,autoHideDuration:6e3,onClose:function(){return N(null)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){N(null)},variant:"filled",severity:"error",children:y})}),Object(a.jsx)(d.a,{open:null!=k,autoHideDuration:6e3,onClose:function(){return E(null)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){E(null)},variant:"filled",severity:"error",children:k})})]}),Object(a.jsxs)("div",{className:"rounded-lg shadow-md bg-white w-full px-8 py-6 mt-3",children:[Object(a.jsxs)("form",{className:"",children:[Object(a.jsx)("label",{htmlFor:"userEmail",className:"block text-gray-700",children:"Email:"}),Object(a.jsx)("input",{type:"email",className:"my-1 p-2 rounded-sm border border-gray-300 w-full focus:outline-none focus:ring focus:border-blue-300",name:"userEmail",value:s,placeholder:"Your university email address",id:"userEmail",onChange:function(e){return P(e)}}),Object(a.jsx)("label",{htmlFor:"userPassword",className:"block text-gray-700",children:"Password:"}),Object(a.jsx)("input",{type:"password",className:"mt-1 mb-3 p-2 rounded-sm border border-gray-300 w-full focus:outline-none focus:ring focus:border-blue-300",name:"userPassword",value:j,placeholder:"Your password",id:"userPassword",onChange:function(e){return P(e)}}),!1===p&&Object(a.jsx)("button",{className:"bg-blue-400 hover:bg-blue-500 w-full py-2 text-white rounded-sm focus:outline-none",onClick:function(e){R(e,s,j)},children:"Sign in"}),!0===p&&Object(a.jsx)("button",{className:"bg-blue-300 w-full py-2 text-white rounded-sm focus:outline-none disabled",onClick:function(e){R(e,s,j)},children:"Signing in..."})]}),Object(a.jsxs)("p",{className:"text-center my-3",children:["Don't have an account?"," ",Object(a.jsx)(i.a,{to:"signUp",className:"text-blue-500 hover:text-blue-600",children:"Sign up here"})," ",Object(a.jsx)("br",{})," ",Object(a.jsx)(i.a,{to:"passwordReset",className:"text-blue-500 hover:text-blue-600",children:"Forgot Password?"})]})]}),Object(a.jsx)("div",{className:"mt-2 text-sm text-center text-gray-500 w-full font-light",children:"\xa92017 Manipal University"})]})})})},N=Object(u.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),C=function(){var e=N(),t=Object(r.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],l=Object(r.useState)(""),u=Object(o.a)(l,2),j=u[0],x=u[1],p=Object(r.useState)(""),O=Object(o.a)(p,2),v=O[0],w=O[1],y=Object(r.useState)("Student"),C=Object(o.a)(y,2),S=C[0],k=C[1],E=Object(r.useState)(null),R=Object(o.a)(E,2),P=R[0],T=R[1],D=Object(r.useState)(!1),U=Object(o.a)(D,2),F=U[0],L=U[1],A=Object(r.useState)(null),I=Object(o.a)(A,2),H=I[0],M=I[1],Y=function(){var e=Object(h.a)(m.a.mark((function e(t,n,a,r){var s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!0),t.preventDefault(),""!==n&&""!==a||(M("Enter all fields correctly"),L(!1),console.error("ERROR: ENTER ALL FIELDS CORRECTLY")),!(a.length<6)){e.next=9;break}M("Password should be at least six characters"),L(!1),console.error("ERROR: ENTER ALL FIELDS CORRECTLY"),e.next=22;break;case 9:return e.prev=9,e.next=12,f.createUserWithEmailAndPassword(n,a);case 12:s=e.sent,l=s.user,g(l,{displayName:v,position:r}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(9),T("Incorrect email or password"),L(!1),console.error("ERROR: INCORRECT USERNAME OR PASSWORD");case 22:c(""),x(""),w(""),k("Student");case 26:case"end":return e.stop()}}),e,null,[[9,17]])})));return function(t,n,a,r){return e.apply(this,arguments)}}(),W=function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n?c(a):"userPassword"===n?x(a):"displayName"===n?w(a):k(e.currentTarget.value)};return Object(a.jsx)("div",{className:"min-h-screen flex justify-center bg-gray-100 px-4 sm:px-6 lg:px-8 font-sans",children:Object(a.jsx)("div",{className:"max-w-lg w-full space-y-2",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{class:"mx-auto mt-6 mb-1 h-12 w-auto",src:"https://upload.wikimedia.org/wikipedia/en/f/ff/Manipal_University_logo.png",alt:"Workflow"}),Object(a.jsx)("h1",{className:"text-xl text-center",children:"Sign Up"}),Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(d.a,{open:null!=P,autoHideDuration:6e3,onClose:function(){return T(null)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){T(null)},variant:"filled",severity:"error",children:P})}),Object(a.jsx)(d.a,{open:null!=H,autoHideDuration:6e3,onClose:function(){return M(null)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){M(null)},variant:"filled",severity:"error",children:H})})]}),Object(a.jsxs)("div",{className:"rounded-lg shadow-md bg-white w-full px-8 py-6 mt-3",children:[Object(a.jsxs)("form",{className:"",children:[Object(a.jsx)("label",{htmlFor:"displayName",className:"block text-gray-700",children:"Your Name:"}),Object(a.jsx)("input",{type:"text",className:"my-1 p-2 rounded-sm border border-gray-300 w-full focus:outline-none focus:ring focus:border-blue-300",name:"displayName",value:v,placeholder:"Enter your name",id:"displayName",onChange:function(e){return W(e)}}),Object(a.jsx)("label",{htmlFor:"userEmail",className:"block text-gray-700",children:"Email:"}),Object(a.jsx)("input",{type:"email",className:"my-1 p-2 rounded-sm border border-gray-300 w-full focus:outline-none focus:ring focus:border-blue-300",name:"userEmail",value:s,placeholder:"Your university email address",id:"userEmail",onChange:function(e){return W(e)}}),Object(a.jsx)("label",{htmlFor:"userPassword",className:"block text-gray-700",children:"Password:"}),Object(a.jsx)("input",{type:"password",className:"my-1 p-2 rounded-sm border border-gray-300 w-full focus:outline-none focus:ring focus:border-blue-300",name:"userPassword",value:j,placeholder:"At least 6 characters",id:"userPassword",onChange:function(e){return W(e)}}),Object(a.jsxs)("div",{className:"flex flex-row items-end items-center mt-2 mb-3",children:[Object(a.jsx)("div",{className:"p-2",children:Object(a.jsx)("label",{className:"black text-gray-700 my-1 w-1/2",children:"You are a"})}),Object(a.jsxs)("select",{name:"position",className:"form-select w-1/2 rounded-sm border border-gray-300 p-2",onChange:function(e){return W(e)},value:S,children:[Object(a.jsx)("option",{value:"Student",children:"Student"}),Object(a.jsx)("option",{value:"Teacher",children:"Teacher"})]})]}),!1===F&&Object(a.jsx)("button",{className:"bg-blue-400 hover:bg-blue-500 w-full py-2 text-white",onClick:function(e){Y(e,s,j,S)},children:"Sign up"}),!0===F&&Object(a.jsx)("button",{className:"bg-blue-300 w-full py-2 text-white disabled",onClick:function(e){Y(e,s,j,S)},children:"Signing up..."})]}),Object(a.jsxs)("p",{className:"text-center my-3",children:["Already have an account?"," ",Object(a.jsx)(i.a,{to:"/",className:"text-blue-500 hover:text-blue-600",children:"Sign in here"})]})]}),Object(a.jsx)("div",{className:"mt-2 text-sm text-center text-gray-500 w-full font-light",children:"\xa92017 Manipal University"})]})})})},S=n(44),k=n(57),E=n(58),R=n(62),P=n(61),T=Object(r.createContext)({user:null}),D=function(e){Object(R.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.componentDidMount=Object(h.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.onAuthStateChanged(function(){var t=Object(h.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n);case 2:a=t.sent,e.setState({user:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(E.a)(n,[{key:"render",value:function(){return Object(a.jsx)(T.Provider,{value:this.state.user,children:this.props.children})}}]),n}(r.Component),U=n(121),F=n(59),L=n.n(F),A=n(47),I=n(60),H=(n(85),Object(u.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(3),height:e.spacing(3)},avatar:{width:e.spacing(18),height:e.spacing(18),color:e.palette.getContrastText(A.a[300]),backgroundColor:A.a[300],fontSize:80}}}))),M=function(){var e=H(),t=Object(r.useState)(new Date),n=Object(o.a)(t,2),s=n[0],c=n[1],l=Object(r.useContext)(T),i=(l.photoURL,l.displayName),u=l.email,d=l.position;return Object(a.jsx)("div",{className:"min-h screen",children:Object(a.jsxs)("div",{className:"mx-auto w-11/12 md:w-2/4 py-8 px-4 md:px-8 rounded-lg bg-white shadow mt-3",children:[Object(a.jsxs)("div",{className:"flex flex-col items-center justify-center md:flex-row md:items-center justify-center px-3 py-3",children:[Object(a.jsx)(U.a,{className:e.avatar,alt:i,children:i[0].toUpperCase()}),Object(a.jsxs)("div",{className:"md:mx-auto",children:[Object(a.jsx)("h2",{className:"text-2xl font-semibold md:mx-auto",children:i}),Object(a.jsx)("h4",{className:"text-gray-500 md:mx-auto italic",children:d}),Object(a.jsxs)("div",{className:"flex flex-row md:mx-auto",children:[Object(a.jsx)("div",{className:"pr-1",children:Object(a.jsx)(L.a,{fontSize:"default"})}),Object(a.jsx)("div",Object(S.a)({children:"pl-1"},"children",Object(a.jsx)("h3",{className:"italic",children:u})))]}),Object(a.jsx)("button",{onClick:function(){return f.signOut()},type:"button",class:"bg-red-500 text-white md:text-sm text-xs mt-2 rounded-sm focus:outline-none p-1",children:"Sign out"})]})]}),Object(a.jsxs)("div",{className:"font-sans text-sm font-semibold text-gray-700 mx-auto flex flex-col items-center justify-center md:flex-row p-3 md:items-center",children:["Hi ",i,", You have no events lined up this week."]}),Object(a.jsx)("div",{className:"w-full mt-4 flex items-center justify-center",children:Object(a.jsx)(I.a,{value:s,onChange:function(e){c(e)}})})]})})},Y=Object(u.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),W=function(){var e=Y(),t=Object(r.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],l=Object(r.useState)(!1),u=Object(o.a)(l,2),j=u[0],m=u[1],x=Object(r.useState)(null),h=Object(o.a)(x,2),p=h[0],O=h[1],g=Object(r.useState)(null),v=Object(o.a)(g,2),w=v[0],y=v[1],N=Object(r.useState)(!1),C=Object(o.a)(N,2),S=C[0],k=C[1],E=function(e){e.preventDefault(),""===s?y("Email cannot be empty"):(k(!0),f.sendPasswordResetEmail(s).then((function(){m(!0),setTimeout((function(){m(!1)}),3e3),k(!1)})).catch((function(){k(!1),O("Error resetting password")})))};return Object(a.jsx)("div",{className:"min-h-screen flex justify-center bg-gray-100 px-4 sm:px-6 lg:px-8 font-sans",children:Object(a.jsxs)("div",{className:"max-w-lg w-full space-y-4",children:[Object(a.jsx)("img",{class:"mx-auto mt-6 mb-1 h-12 w-auto",src:"https://upload.wikimedia.org/wikipedia/en/f/ff/Manipal_University_logo.png",alt:"Workflow"}),Object(a.jsx)("h1",{className:"text-xl text-center",children:"Reset your password"}),Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(d.a,{open:null!=p,autoHideDuration:6e3,onClose:function(){return O(null)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){O(null)},variant:"filled",severity:"error",children:p})}),Object(a.jsx)(d.a,{open:null!=w,autoHideDuration:6e3,onClose:function(){return y(null)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){y(null)},variant:"filled",severity:"error",children:w})}),Object(a.jsx)(d.a,{open:1==j,autoHideDuration:6e3,onClose:function(){return m(!1)},children:Object(a.jsx)(b.a,{elevation:6,onClose:function(){m(!1)},variant:"filled",severity:"info",children:p})})]}),Object(a.jsxs)("div",{className:"rounded-lg shadow-md bg-white w-full px-8 py-6 mt-3",children:[Object(a.jsxs)("form",{action:"",children:[Object(a.jsx)("label",{htmlFor:"userEmail",className:"w-full block",children:"Email:"}),Object(a.jsx)("input",{type:"email",name:"userEmail",id:"userEmail",value:s,placeholder:"Input your email",onChange:function(e){var t=e.currentTarget,n=t.name,a=t.value;"userEmail"===n&&c(a)},className:"my-1 p-2 mb-2 rounded-sm border border-gray-300 w-full focus:outline-none focus:ring focus:border-blue-300"}),!1===S&&Object(a.jsx)("button",{className:"bg-blue-400 hover:bg-blue-500 w-full py-2 text-white focus:outline-none",onClick:function(e){E(e)},children:"Send me a reset link"}),!0===S&&Object(a.jsx)("button",{className:"bg-blue-300 w-full py-2 text-white focus:outline-none disabled",onClick:function(e){E(e)},children:"Loading..."})]}),Object(a.jsx)(i.a,{to:"/",className:"my-2 text-blue-700 hover:text-blue-800 text-center block",children:"back to sign in page"})]}),Object(a.jsx)("div",{className:"mt-2 text-sm text-center text-gray-500 w-full font-light",children:"\xa92017 Manipal University"})]})})};var _=function(){var e=Object(r.useContext)(T);return console.log(e),e?Object(a.jsx)(M,{}):Object(a.jsxs)(i.b,{children:[Object(a.jsx)(C,{path:"signUp"}),Object(a.jsx)(y,{path:"/"}),Object(a.jsx)(W,{path:"passwordReset"})]})};var z=function(){return Object(a.jsx)(D,{children:Object(a.jsx)(_,{})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};l.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(z,{})}),document.getElementById("root")),B()}},[[90,1,2]]]);
//# sourceMappingURL=main.30c83435.chunk.js.map